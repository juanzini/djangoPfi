<!-- templates/registration/login.html -->
{% extends 'base.html' %}
{% load material_form %}

{% block title %}Login{% endblock %}

{% block content %}
<div class="row" style="margin-bottom:0px;">
    <div class="col l5 m12 s12 z-depth-3" style="padding-bottom:2em; margin-top:1.3em;">
        <h4><b>Ingres&aacute; tus datos</b></h4>
        <br>
        <form method="post" class="form">
            {% csrf_token %}
            {% form form=form %}{% endform %}
                <button type="submit" class="btn btn-md">Iniciar Sesi&oacute;n</button>
                <a href="{% url 'create-alumno' %}"><button class="btn btn-md" type="button" style="float: right;">Registrarme</button></a>
        </form>
    </div>
    <div class="col l7 m12 s12">
        <h5>Bienvenido al <b>Sistema de Pasant&iacute;as y Pr&aacute;cticas Profesionales</b> de tu Departamento de Informática!</h5>
        <p style="font-size: 1.3em;">Donde el trabajo y las ganas de trabajar se encuentran mutuamente.</p>
        <blockquote>
            <p><b>Sos un alumno y estás buscando tu primer experiencia laboral?</b> Hace click en REGISTRARME! Y comenzá a postularte en las oportunidades que
            tu departamento preparó junto a las empresas más importantes de San Luis, para que vivas una experiencia inolvidable y llena de aprendizajes.</p>
        </blockquote>
        <blockquote>
            <p><b>Sos una empresa y querés ofrecer tus oportunidades a los estudiantes mejor capacitados de la provincia?</b> Contactate con nosotros a <a style="color:blue" href="mailto:secinfo@unsl.edu.ar">secinfo@unsl.edu.ar</a>
            para que podamos coordinar todo lo necesario para formar parte de la vida de los profesionales del futuro.</p>
        </blockquote>
    </div>
</div>
<div class="row">
    <div class="carousel" id="mycarousel" style="height: 20em;"></div>

</div>
<script type="text/javascript">

  document.addEventListener('DOMContentLoaded', function() {

    $.ajax({
        url: "{% url 'ajax-get-logos-empresas' %}",
        type: 'GET',
        dataType: "json",
        success: function(data){
           $.each(data, function(idx, obj) {
                    if (obj.fields.logo !== 'undefined' && obj.fields.logo !== null && obj.fields.logo !== '') {
                        var newSlide = makeSlideCarousel(obj.fields.logo, obj.fields.nombre_fantasia)
                        $('.carousel-item').first().addClass('active');
                        $("#mycarousel").append(newSlide);
                    }
           });
           $('#mycarousel').carousel({
            numVisible: 3,
            dist: -50
           });
           setInterval(function() {
                $("#mycarousel").carousel('next');
            }, 3000);
        },
        error: function(jqXHR, textStatus, errorThrown) {}
    });

    function makeSlideCarousel(logoPath, nombreEmpresa) {
        var newItem = $("<a>").addClass("carousel-item");
        var divContainer = $("<div style='height: 100%;'>");
        var divRowImg = $("<div style='margin-bottom:0em'>").addClass("row center-align");
        var divRowTxt = $("<div style='margin-bottom:0em'>").addClass("row center-align");
        var img = $("<img style='width: 12em;'>").attr("src", '/public-documents/' + logoPath);
        var txt = $("<p class='black-text hidden-content' style='font-size: 15px; font-weight:bolder; margin-bottom: 0px; margin-top: 0px;'>").text(nombreEmpresa);
        divRowImg.append(img);
        divRowTxt.append(txt);
        divContainer.append(divRowImg);
        divContainer.append(divRowTxt);
        newItem.append(divContainer);

        return newItem;
    }
  });
</script>
{% endblock %}
